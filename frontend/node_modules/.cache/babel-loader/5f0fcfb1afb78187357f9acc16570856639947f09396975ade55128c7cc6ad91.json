{"ast":null,"code":"import _objectSpread from\"D:/AliMunishiApp/frontend/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import React,{useEffect,useState}from'react';import'../styles/consumers.css';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const Consumers=()=>{const[consumers,setConsumers]=useState([]);const[form,setForm]=useState({name:'',surname:'',type:'Amviseri',address:''});const API_URL=process.env.REACT_APP_API_URL+\"/consumers\";useEffect(()=>{fetch(API_URL).then(res=>res.json()).then(data=>{if(Array.isArray(data)){setConsumers(data);}else if(data&&Array.isArray(data.consumers)){setConsumers(data.consumers);}else{setConsumers([]);}}).catch(err=>{console.error('Gabim në fetch:',err);setConsumers([]);});},[]);const[showScrollTop,setShowScrollTop]=useState(false);useEffect(()=>{const handleScroll=()=>{if(window.scrollY>300){setShowScrollTop(true);}else{setShowScrollTop(false);}};window.addEventListener('scroll',handleScroll);return()=>window.removeEventListener('scroll',handleScroll);},[]);const handleChange=e=>{setForm(_objectSpread(_objectSpread({},form),{},{[e.target.name]:e.target.value}));};const handleSubmit=async e=>{e.preventDefault();const newConsumer={name:form.name,surname:form.surname,type:form.type,address:form.address};try{const response=await fetch(API_URL,{method:'POST',headers:{'Content-Type':'application/json'},body:JSON.stringify(newConsumer)});if(!response.ok)throw new Error('Gabim gjatë shtimit të konsumatorit');const data=await response.json();setConsumers([...consumers,data]);setForm({name:'',surname:'',address:'',type:'Amviseri'});}catch(err){console.error('Gabim gjatë shtimit të konsumatorit:',err);}};return/*#__PURE__*/_jsxs(\"div\",{className:\"history-container\",children:[/*#__PURE__*/_jsx(\"h2\",{children:\"Lista e Konsumator\\xEBve\"}),/*#__PURE__*/_jsx(\"div\",{className:\"history-table-container\",children:consumers.length>0?/*#__PURE__*/_jsxs(\"table\",{className:\"history-table\",children:[/*#__PURE__*/_jsx(\"thead\",{children:/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"th\",{children:\"Emri\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Mbiemri\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Adresa\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Tipi\"})]})}),/*#__PURE__*/_jsx(\"tbody\",{children:consumers.map(consumer=>/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"td\",{\"data-label\":\"Emri\",children:consumer.name}),/*#__PURE__*/_jsx(\"td\",{\"data-label\":\"Mbiemri\",children:consumer.surname}),/*#__PURE__*/_jsx(\"td\",{\"data-label\":\"Adresa\",children:consumer.address}),/*#__PURE__*/_jsx(\"td\",{\"data-label\":\"Tipi\",children:consumer.type})]},consumer.id))})]}):/*#__PURE__*/_jsx(\"p\",{children:\"Nuk ka t\\xEB dh\\xEBna p\\xEBr konsumator\\xEB.\"})}),/*#__PURE__*/_jsx(\"h2\",{style:{marginTop:'40px'},children:\"Shto Konsumatorin e Ri\"}),/*#__PURE__*/_jsxs(\"form\",{onSubmit:handleSubmit,className:\"form-container\",children:[/*#__PURE__*/_jsx(\"input\",{type:\"text\",name:\"name\",placeholder:\"Emri\",value:form.name,onChange:handleChange,required:true}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",name:\"surname\",placeholder:\"Mbiemri\",value:form.surname,onChange:handleChange,required:true}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",name:\"address\",placeholder:\"Adresa\",value:form.address,onChange:handleChange,required:true}),/*#__PURE__*/_jsxs(\"select\",{name:\"type\",value:form.type,onChange:handleChange,children:[/*#__PURE__*/_jsx(\"option\",{value:\"Amviseri\",children:\"Amvis\\xEBri\"}),/*#__PURE__*/_jsx(\"option\",{value:\"Biznes\",children:\"Biznes\"})]}),/*#__PURE__*/_jsx(\"button\",{type:\"submit\",children:\"Shto Konsumatorin\"})]}),showScrollTop&&/*#__PURE__*/_jsx(\"button\",{className:\"scroll-to-top-float\",onClick:()=>window.scrollTo({top:0,behavior:'smooth'}),\"aria-label\":\"Kthehu lart\",children:\"\\u2191\"})]});};export default Consumers;","map":{"version":3,"names":["React","useEffect","useState","jsx","_jsx","jsxs","_jsxs","Consumers","consumers","setConsumers","form","setForm","name","surname","type","address","API_URL","process","env","REACT_APP_API_URL","fetch","then","res","json","data","Array","isArray","catch","err","console","error","showScrollTop","setShowScrollTop","handleScroll","window","scrollY","addEventListener","removeEventListener","handleChange","e","_objectSpread","target","value","handleSubmit","preventDefault","newConsumer","response","method","headers","body","JSON","stringify","ok","Error","className","children","length","map","consumer","id","style","marginTop","onSubmit","placeholder","onChange","required","onClick","scrollTo","top","behavior"],"sources":["D:/AliMunishiApp/frontend/src/pages/Consumers.jsx"],"sourcesContent":["import React, { useEffect, useState } from 'react';\r\nimport '../styles/consumers.css';\r\n\r\nconst Consumers = () => {\r\n  const [consumers, setConsumers] = useState([]);\r\n  const [form, setForm] = useState({ name: '', surname: '', type: 'Amviseri', address: '' });\r\n\r\n  const API_URL = process.env.REACT_APP_API_URL + \"/consumers\";\r\n\r\n  useEffect(() => {\r\n    fetch(API_URL)\r\n      .then(res => res.json())\r\n      .then(data => {\r\n        if (Array.isArray(data)) {\r\n          setConsumers(data);\r\n        } else if (data && Array.isArray(data.consumers)) {\r\n          setConsumers(data.consumers);\r\n        } else {\r\n          setConsumers([]);\r\n        }\r\n      })\r\n      .catch(err => {\r\n        console.error('Gabim në fetch:', err);\r\n        setConsumers([]);\r\n      });\r\n  }, []);\r\n  const [showScrollTop, setShowScrollTop] = useState(false);\r\n\r\nuseEffect(() => {\r\n  const handleScroll = () => {\r\n    if (window.scrollY > 300) {\r\n      setShowScrollTop(true);\r\n    } else {\r\n      setShowScrollTop(false);\r\n    }\r\n  };\r\n\r\n  window.addEventListener('scroll', handleScroll);\r\n  return () => window.removeEventListener('scroll', handleScroll);\r\n}, []);\r\n\r\n\r\n  const handleChange = (e) => {\r\n    setForm({ ...form, [e.target.name]: e.target.value });\r\n  };\r\n\r\n  const handleSubmit = async (e) => {\r\n    e.preventDefault();\r\n\r\n    const newConsumer = { \r\n      name: form.name, \r\n      surname: form.surname, \r\n      type: form.type, \r\n      address: form.address \r\n    };\r\n\r\n    try {\r\n      const response = await fetch(API_URL, {\r\n        method: 'POST',\r\n        headers: { 'Content-Type': 'application/json' },\r\n        body: JSON.stringify(newConsumer),\r\n      });\r\n\r\n      if (!response.ok) throw new Error('Gabim gjatë shtimit të konsumatorit');\r\n\r\n      const data = await response.json();\r\n      setConsumers([...consumers, data]);\r\n      setForm({ name: '', surname: '', address: '', type: 'Amviseri' });\r\n    } catch (err) {\r\n      console.error('Gabim gjatë shtimit të konsumatorit:', err);\r\n    }\r\n  };\r\n\r\n  return (\r\n  <div className=\"history-container\">\r\n    <h2>Lista e Konsumatorëve</h2>\r\n\r\n    <div className=\"history-table-container\">\r\n      {consumers.length > 0 ? (\r\n        <table className=\"history-table\">\r\n          <thead>\r\n            <tr>\r\n              <th>Emri</th>\r\n              <th>Mbiemri</th>\r\n              <th>Adresa</th>\r\n              <th>Tipi</th>\r\n            </tr>\r\n          </thead>\r\n          <tbody>\r\n            {consumers.map((consumer) => (\r\n              <tr key={consumer.id}>\r\n                <td data-label=\"Emri\">{consumer.name}</td>\r\n                <td data-label=\"Mbiemri\">{consumer.surname}</td>\r\n                <td data-label=\"Adresa\">{consumer.address}</td>\r\n                <td data-label=\"Tipi\">{consumer.type}</td>\r\n              </tr>\r\n            ))}\r\n          </tbody>\r\n        </table>\r\n      ) : (\r\n        <p>Nuk ka të dhëna për konsumatorë.</p>\r\n      )}\r\n    </div>\r\n\r\n    <h2 style={{ marginTop: '40px' }}>Shto Konsumatorin e Ri</h2>\r\n\r\n    <form onSubmit={handleSubmit} className=\"form-container\">\r\n      <input\r\n        type=\"text\"\r\n        name=\"name\"\r\n        placeholder=\"Emri\"\r\n        value={form.name}\r\n        onChange={handleChange}\r\n        required\r\n      />\r\n      <input\r\n        type=\"text\"\r\n        name=\"surname\"\r\n        placeholder=\"Mbiemri\"\r\n        value={form.surname}\r\n        onChange={handleChange}\r\n        required\r\n      />\r\n      <input\r\n        type=\"text\"\r\n        name=\"address\"\r\n        placeholder=\"Adresa\"\r\n        value={form.address}\r\n        onChange={handleChange}\r\n        required\r\n      />\r\n      <select name=\"type\" value={form.type} onChange={handleChange}>\r\n        <option value=\"Amviseri\">Amvisëri</option>\r\n        <option value=\"Biznes\">Biznes</option>\r\n      </select>\r\n      <button type=\"submit\">Shto Konsumatorin</button>\r\n    </form>\r\n  {showScrollTop && (\r\n  <button \r\n    className=\"scroll-to-top-float\"\r\n    onClick={() => window.scrollTo({ top: 0, behavior: 'smooth' })}\r\n    aria-label=\"Kthehu lart\"\r\n  >\r\n    ↑\r\n  </button>\r\n)}\r\n\r\n  </div>\r\n);\r\n};\r\n\r\nexport default Consumers;\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}